<h1 style="text-align:center;" id="title"></h1>
<h1 style="text-align:center;" id="playersJoined">Players Joined: 0/4</h1>
<button onclick="stop()" value="true">Stop</button>


<div id= "host">
 <img src="/img/Book1.jpg" alt="Girl in a jacket" width="200" height="200">
 <p>Host</p>
</div>
<div id= "player1">
 <img src="/img/Boy1.jpg" alt="Girl in a jacket" width="200" height="200">
 <p>Player 1</p>
</div>
<div id= "player2">
 <img src="/img/Boy1.jpg" alt="Girl in a jacket" width="200" height="200">
 <p>Player 2</p>
</div>
<div id= "player3">
 <img src="/img/Boy1.jpg" alt="Girl in a jacket" width="200" height="200">
 <p>Player 3</p>
</div>
<div id= "player4">
 <img src="/img/Boy1.jpg" alt="Girl in a jacket" width="200" height="200">
 <p>Player 4</p>
</div>
 <img src="/img/Book1.jpg" alt="Girl in a jacket" width="500" height="600"> 
<script>
	var bool = false;
	var uuid;
	var intervalId;
	var count = 0;
	const ws = new WebSocket('ws://localhost:9898/');
	 window.addEventListener('load', function () {
		
	
		
	});
	const queryString = window.location.search;
		const urlParams = new URLSearchParams(queryString);
		var gameId = urlParams.get('game');
		
		var data = {
		action:"joinGame",
		gameId:gameId
		}
		ws.onopen = function() {
			console.log('WebSocket Client Connected');
			ws.send(JSON.stringify(data));
		};
	ws.onmessage = function(e) {
		console.log(e.data);
	  parseResponse(JSON.parse(e.data));
	};
	
	
	function parseResponse(data){
	console.log(data);
		if(data.action == "joinedGame"){
			count+=1;
			document.getElementById("playersJoined").innerHTML = "Players Joined: " + data.players + "/4";
		}
		else if(data.action == "error"){
			window.location.href = "http://localhost/playGame?error="+data.value;
		}
	}


	
</script>