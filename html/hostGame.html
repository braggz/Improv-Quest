<h1 style="text-align:center;" id="title"></h1>
<h1 style="text-align:center;" id="playersJoined">Players Joined: 0/4</h1>
<button onclick="stop()" value="true">Stop</button>
<h1 id="gameIdTitile"></h1>


<div id= "host">
 <img id="hostPic" src="/img/Book1.jpg" alt="Girl in a jacket" width="200" height="200">
 <p>Host</p>
</div>
<div id= "playersPicSlots">
	<div id="PlayerOneSlot">
		<img id="playerOnePic" src="/img/Boy1.jpg" alt="Girl in a jacket" width="200" height="200" style="display:none;">
	</div>
	<div id="PlayerTwoSlot">
		<img id="playerTwoPic" src="/img/Boy1.jpg" alt="Girl in a jacket" width="200" height="200" style="display:none;">
	</div>
	<div id="PlayerThreeSlot">
		<img id="playerThreePic" src="/img/Boy1.jpg" alt="Girl in a jacket" width="200" height="200" style="display:none;">
	</div>
	<div id="PlayerFourSlot">
		<img id="playerFourPic" src="/img/Boy1.jpg" alt="Girl in a jacket" width="200" height="200" style="display:none;">
	</div>
</div>
   
<script>
	var bool = false;
	var uuid;
	var intervalId;
	var count = 0;
	
	var playerOneId;
	var playerTwoId;
	var playerThreeId;
	var playerFourId;
	
	const ws = new WebSocket('ws://localhost:9898/');
	 window.addEventListener('load', function () {
		
	
		
	});
	const queryString = window.location.search;
		const urlParams = new URLSearchParams(queryString);
		var hostName = urlParams.get('title');
		document.getElementById("title").innerHTML = hostName;
		var data = {
		action:"createGame",
		title:hostName
		}
		ws.onopen = function() {
			console.log('WebSocket Client Connected');
			ws.send(JSON.stringify(data));
		};
	ws.onmessage = function(e) {
		console.log(e.data);
	  parseResponse(e.data);
	};

	
	function parseResponse(data){
		var parsed = JSON.parse(data);
		if(parsed.action == "gameCreated"){
			uuid = parsed.value;
			document.getElementById("title").innerHTML = uuid;
		}
		else if(parsed.action == "joinedGame"){
			count++;
			document.getElementById("playersJoined").innerHTML = "Players Joined: "+data.players+"/4";
			addPlayerPicSlot(parsed.playerPicSlots);
		}
	}
	
	function addPlayerPicSlot(val){
		for(var key in val){
			if(val[key] != null){
				if(key == "playerOneSlotId"){
					document.getElementById("playerOnePic").style.display = "block";
				}
				else if(key == "playerTwoSlotId"){
					document.getElementById("playerTwoPic").style.display = "block";
				}
				else if(key == "playerThreeSlotId"){
					document.getElementById("playerThreePic").style.display = "block";
				}
				else if(key == "playerFourSlotId"){
					document.getElementById("playerFourPic").style.display = "block";
				}
			}
		}
	}
</script>