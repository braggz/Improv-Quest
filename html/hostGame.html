<h1 style="text-align:center;" id="title"></h1>
<h1 style="text-align:center;" id="playersJoined">Players Joined: 0/4</h1>
<button onclick="stop()" value="true">Stop</button>
<h1 id="gameIdTitile"></h1>


<div id= "host">
 <img src="/img/Book1.jpg" alt="Girl in a jacket" width="200" height="200">
 <p>Host</p>
</div>
<div id= "player1">
 <img src="/img/Boy1.jpg" alt="Girl in a jacket" width="200" height="200">
 <p>Player 1</p>
</div>
<div id= "player2">
 <img src="/img/Boy1.jpg" alt="Girl in a jacket" width="200" height="200">
 <p>Player 2</p>
</div>
<div id= "player3">
 <img src="/img/Boy1.jpg" alt="Girl in a jacket" width="200" height="200">
 <p>Player 3</p>
</div>
<div id= "player4">
 <img src="/img/Boy1.jpg" alt="Girl in a jacket" width="200" height="200">
 <p>Player 4</p>
</div>
   
<script>
	var bool = false;
	var uuid;
	var intervalId;
	var count = 0;
	const ws = new WebSocket('ws://localhost:9898/');
	 window.addEventListener('load', function () {
		
	
		
	});
	const queryString = window.location.search;
		const urlParams = new URLSearchParams(queryString);
		var hostName = urlParams.get('title');
		document.getElementById("title").innerHTML = hostName;
		var data = {
		action:"createGame",
		title:hostName
		}
		ws.onopen = function() {
			console.log('WebSocket Client Connected');
			ws.send(JSON.stringify(data));
		};
	ws.onmessage = function(e) {
		console.log(e.data);
	  parseResponse(e.data);
	};

	
	function parseResponse(data){
		var parsed = JSON.parse(data);
		if(parsed.action == "gameCreated"){
			uuid = parsed.value;
			document.getElementById("title").innerHTML = uuid;
		}
		else if(parsed.action == "joinedGame"){
			count++;
			document.getElementById("playersJoined").innerHTML = "Players Joined: "+data.players+"/4";
		}
	}

</script>